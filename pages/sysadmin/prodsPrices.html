<BorderContainer id="sysadmin_ProdsPrices_PageContainer" style="width:100%;height:100%;">
    <ContentPane id="sysadmin_ProdsPrices_ContentPaneLeft" region="left" splitter="true" style="width:255px;height:100%; margin:0;padding:0;">
        <div id="sysadmin_ProdsPrices_getCashboxesErr"></div>
        <table>
            <tr><th>Кассовые аппараты<br/>(тип ЭККА MINI-T)</th></tr>
            <tr><td id="sysadmin_ProdsPrices_CrsButtons">
            </td></tr>
        </table>
    </ContentPane>
    <StackContainer id="sysadmin_ProdsPrices_ContentPaneDetailContainer" region="center" style="width:100%;height:100%; margin:0;padding:0;"></StackContainer>
</BorderContainer>
<script type="text/javascript">
    var createReportButtons=function(){
        $$.request.getJSONData({url: "/sysadmin/getCashboxes",consoleLog: true},
                function(result,error){                                                                     log("createReportButtons getJSONData getCashboxes result=",result);
                    if(error){
                        $$.sysadmin_ProdsPrices_getCashboxesErr.innerHTML =
                                "<span><b style='color:red'>Failed get cashboxes list from server! Reason: "+error.message+"</b></sp>";
                        return;
                    }
                    for(var i in result.items){
                        var item=result.items[i];
                        addButtonTo($$.sysadmin_ProdsPrices_CrsButtons, "GetPrices"+item.CRID, item.CRName+" "+item.FacID);
                    }
                });
    };
    addButtonTo = function(parent, id, name){
        $$.$.addWigetTo(parent,"Button",{id:id, label:name, style:"margin-left:2px;;margin-right:1px;",fStyle:"width:239px"});
        var button=$$[id];
        button.onClick= function(){
            if (!button.document){
                var id="sysadmin_ProdsPrices_TableGetPrices"+this.id;
                $$.sysadmin_ProdsPrices_ContentPaneDetailContainer.$.addAppComponent("TDocSimpleTable",
                        {id:id, titleText:this.label, dataURL:'/sysadmin/ProdsPrices/getProdsPricesByCRID/'+this.id, buttonPrint:false},
                        function(doc){
                            doc.addTotalCountNumberBox("ИТОГО строк:", 140, {style:"font-weight:bold;",inputStyle:"width:50px;"})
                                    .startupDoc();
                        });
                button.document = $$[id];
            }
            $$.sysadmin_ProdsPrices_ContentPaneDetailContainer.selectChild(button.document);
        };
        return button;
    };
    createReportButtons();
    var btnAllCRs= addButtonTo($$.sysadmin_ProdsPrices_CrsButtons, "GetPrices-1", "Все кассы");
    btnAllCRs.onClick();
</script>